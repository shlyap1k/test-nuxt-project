<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Кредитный калькулятор</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    label {
      display: block;
      margin-bottom: 5px;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      box-sizing: border-box;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    #result {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>Кредитный калькулятор</h2>

  <label for="loanAmount">Сумма займа:</label>
  <input type="number" id="loanAmount" placeholder="Введите сумму займа" required>

  <label for="loanTerm">Срок займа (в месяцах):</label>
  <input type="number" id="loanTerm" placeholder="Введите срок займа" required>

  <label for="interestRate">Процентная ставка (%):</label>
  <input type="number" id="interestRate" placeholder="Введите процентную ставку" required>

  <label for="downPayment">Первоначальный взнос:</label>
  <input type="number" id="downPayment" placeholder="Введите первоначальный взнос">

  <label for="fees">Комиссионные сборы:</label>
  <input type="number" id="fees" placeholder="Введите комиссионные сборы">

  <label for="startDate">Дата первой оплаты:</label>
  <input type="date" id="startDate" required>

  <button onclick="calculateLoan()">Рассчитать</button>

  <div id="result"></div>
  <div id="bestOption"></div>
  <script>
    function calculateLoan() {
      var loanAmount = parseFloat(document.getElementById('loanAmount').value);
      var loanTerm = parseInt(document.getElementById('loanTerm').value);
      var interestRate = parseFloat(document.getElementById('interestRate').value);
      var downPayment = parseFloat(document.getElementById('downPayment').value) || 0;
      var fees = parseFloat(document.getElementById('fees').value) || 0;
      var startDate = new Date(document.getElementById('startDate').value);

      var monthlyInterestRate = (interestRate / 100) / 12;
      var loanBalance = loanAmount - downPayment + fees;

    // Расчет аннуитетного платежа
    var monthlyPaymentAnnuity = loanBalance * (monthlyInterestRate / (1 - Math.pow(1 + monthlyInterestRate, -loanTerm)));

    // Расчет дифференцированного платежа
    var monthlyPaymentDifferentiated = loanBalance / loanTerm + (loanBalance * monthlyInterestRate);

    var totalPaymentsAnnuity = monthlyPaymentAnnuity * loanTerm;
    var totalPaymentsDifferentiated = monthlyPaymentDifferentiated * loanTerm;

    var resultHTML = '<h3>График выплат по кредиту:</h3>';
    resultHTML += '<table>';
    resultHTML += '<tr><th>Месяц</th><th>Остаток долга</th><th>Ежемесячный платеж (Аннуитетный)</th><th>Остаток долга</th><th>Ежемесячный платеж (Дифференцированный)</th></tr>';
    var loanBalanceAnnuity = loanBalance;
    var loanBalanceDifferentiated = loanBalance;
    for (var i = 0; i < loanTerm; i++) {
      var interestPaymentAnnuity = loanBalance * monthlyInterestRate;
      var principalPaymentAnnuity = monthlyPaymentAnnuity - interestPaymentAnnuity;
      loanBalanceAnnuity -= principalPaymentAnnuity;

      var interestPaymentDifferentiated = loanBalance * monthlyInterestRate;
      var principalPaymentDifferentiated = monthlyPaymentDifferentiated - interestPaymentDifferentiated;
      loanBalanceDifferentiated -= principalPaymentDifferentiated;

      resultHTML += '<tr>';
      resultHTML += '<td>' + (i + 1) + '</td>';
      resultHTML += '<td>' + loanBalanceAnnuity.toFixed(2) + '</td>';
      resultHTML += '<td>' + monthlyPaymentAnnuity.toFixed(2) + '</td>';
      resultHTML += '<td>' + loanBalanceDifferentiated.toFixed(2) + '</td>';
      resultHTML += '<td>' + monthlyPaymentDifferentiated.toFixed(2) + '</td>';
      resultHTML += '</tr>';
    }

    resultHTML += '</table>';

    // Сравнение общих сумм выплат и вывод информации о наиболее выгодном варианте
    var bestOptionHTML = '<h3>Сравнение вариантов:</h3>';
    bestOptionHTML += '<p>Общая сумма выплат (Аннуитетный): ' + totalPaymentsAnnuity.toFixed(2) + '</p>';
    bestOptionHTML += '<p>Общая сумма выплат (Дифференцированный): ' + totalPaymentsDifferentiated.toFixed(2) + '</p>';

    if (totalPaymentsAnnuity < totalPaymentsDifferentiated) {
      bestOptionHTML += '<p>Наиболее выгодный вариант: Аннуитетный платеж</p>';
    } else {
      bestOptionHTML += '<p>Наиболее выгодный вариант: Дифференцированный платеж</p>';
    }

    document.getElementById('result').innerHTML = resultHTML;
    document.getElementById('bestOption').innerHTML = bestOptionHTML;
    }
  </script>
  

</body>
</html>
